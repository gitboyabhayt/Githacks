<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Forum - GITHACKS Community</title>
    <meta name="description" content="Join the GITHACKS community forum to discuss cybersecurity topics, share knowledge, and connect with other security enthusiasts.">
    
    <!-- Preload Critical Resources -->
    <link rel="preload" href="../css/style.css" as="style">
    <link rel="preload" href="../css/community.css" as="style">
    
    <!-- Stylesheets -->
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/community.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <!-- Skip to main content for accessibility -->
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <!-- Navigation -->
    <nav class="main-nav" role="navigation" aria-label="Main navigation">
        <div class="nav-brand">
            <a href="../index.html" aria-label="GITHACKS Home">
                <span class="neon-text">GITHACKS</span>
            </a>
        </div>
        <div class="nav-links" role="menubar">
            <a href="../index.html" class="nav-link" role="menuitem">Home</a>
            <a href="../courses.html" class="nav-link" role="menuitem">Courses</a>
            <a href="../dashboard/index.html" class="nav-link" role="menuitem">Dashboard</a>
            <a href="../books/index.html" class="nav-link" role="menuitem">Books</a>
            <a href="../tools/index.html" class="nav-link" role="menuitem">Tools</a>
            <a href="index.html" class="nav-link active" role="menuitem" aria-current="page">Community</a>
        </div>
        <div class="auth-links">
            <a href="../profile/settings.html" class="btn btn-secondary" role="button">
                <i class="fas fa-user"></i> Profile
            </a>
            <button class="btn btn-primary" id="logoutBtn">
                <i class="fas fa-sign-out-alt"></i> Logout
            </button>
        </div>
    </nav>

    <!-- Main Content -->
    <main id="main-content" class="forum-container">
        <!-- Forum Header -->
        <header class="forum-header">
            <h1>Community Forum</h1>
            <p>Join discussions, share knowledge, and connect with fellow security enthusiasts</p>
        </header>

        <!-- Forum Controls -->
        <div class="forum-controls">
            <div class="search-filters">
                <div class="search-bar">
                    <input type="search" id="forumSearch" placeholder="Search discussions..." aria-label="Search discussions">
                    <button type="button" class="search-btn" aria-label="Search">
                        <i class="fas fa-search"></i>
                    </button>
                </div>
                <div class="filters">
                    <select id="categoryFilter" aria-label="Filter by category">
                        <option value="">All Categories</option>
                        <option value="web-security">Web Security</option>
                        <option value="network-security">Network Security</option>
                        <option value="malware-analysis">Malware Analysis</option>
                        <option value="pentesting">Penetration Testing</option>
                        <option value="ctf">CTF Challenges</option>
                        <option value="tools">Security Tools</option>
                        <option value="news">Security News</option>
                    </select>
                    <select id="sortFilter" aria-label="Sort discussions">
                        <option value="recent">Most Recent</option>
                        <option value="popular">Most Popular</option>
                        <option value="unanswered">Unanswered</option>
                    </select>
                </div>
            </div>
            <button type="button" class="btn btn-primary" id="newThreadBtn">
                <i class="fas fa-plus"></i> New Discussion
            </button>
        </div>

        <!-- Forum Content -->
        <div class="forum-content">
            <!-- Categories -->
            <aside class="forum-categories">
                <h2>Categories</h2>
                <ul class="category-list">
                    <li>
                        <a href="#" class="category-item active" data-category="all">
                            <i class="fas fa-layer-group"></i>
                            <span>All Categories</span>
                            <span class="count">245</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" class="category-item" data-category="web-security">
                            <i class="fas fa-globe"></i>
                            <span>Web Security</span>
                            <span class="count">86</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" class="category-item" data-category="network-security">
                            <i class="fas fa-network-wired"></i>
                            <span>Network Security</span>
                            <span class="count">52</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" class="category-item" data-category="malware-analysis">
                            <i class="fas fa-bug"></i>
                            <span>Malware Analysis</span>
                            <span class="count">34</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" class="category-item" data-category="pentesting">
                            <i class="fas fa-user-secret"></i>
                            <span>Penetration Testing</span>
                            <span class="count">41</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" class="category-item" data-category="ctf">
                            <i class="fas fa-flag"></i>
                            <span>CTF Challenges</span>
                            <span class="count">28</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" class="category-item" data-category="tools">
                            <i class="fas fa-tools"></i>
                            <span>Security Tools</span>
                            <span class="count">37</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" class="category-item" data-category="news">
                            <i class="fas fa-newspaper"></i>
                            <span>Security News</span>
                            <span class="count">19</span>
                        </a>
                    </li>
                </ul>
            </aside>

            <!-- Threads List -->
            <section class="forum-threads">
                <div class="thread-list">
                    <!-- Thread Item -->
                    <article class="thread-item">
                        <div class="thread-votes">
                            <button class="vote-btn" aria-label="Upvote">
                                <i class="fas fa-chevron-up"></i>
                            </button>
                            <span class="vote-count">42</span>
                            <button class="vote-btn" aria-label="Downvote">
                                <i class="fas fa-chevron-down"></i>
                            </button>
                        </div>
                        <div class="thread-content">
                            <div class="thread-header">
                                <h3 class="thread-title">
                                    <a href="#">Understanding Cross-Site Scripting (XSS) and Prevention Methods</a>
                                </h3>
                                <span class="thread-category">Web Security</span>
                            </div>
                            <p class="thread-excerpt">A comprehensive guide to understanding XSS vulnerabilities, their types, and how to effectively prevent them in modern web applications...</p>
                            <div class="thread-meta">
                                <div class="thread-stats">
                                    <span><i class="fas fa-comment"></i> 18 replies</span>
                                    <span><i class="fas fa-eye"></i> 234 views</span>
                                </div>
                                <div class="thread-author">
                                    <img src="../assets/avatars/user1.jpg" alt="Author avatar" class="author-avatar">
                                    <div class="author-info">
                                        <span class="author-name">John Smith</span>
                                        <span class="thread-time">2 hours ago</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </article>

                    <!-- More Thread Items -->
                    <!-- Add more thread items here -->
                </div>

                <!-- Pagination -->
                <div class="pagination">
                    <button class="pagination-btn" disabled aria-label="Previous page">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    <div class="page-numbers">
                        <button class="page-btn active">1</button>
                        <button class="page-btn">2</button>
                        <button class="page-btn">3</button>
                        <span class="page-ellipsis">...</span>
                        <button class="page-btn">12</button>
                    </div>
                    <button class="pagination-btn" aria-label="Next page">
                        <i class="fas fa-chevron-right"></i>
                    </button>
                </div>
            </section>
        </div>
    </main>

    <!-- New Thread Modal -->
    <div class="modal" id="newThreadModal" aria-hidden="true">
        <div class="modal-overlay"></div>
        <div class="modal-container" role="dialog" aria-labelledby="modalTitle">
            <div class="modal-header">
                <h2 id="modalTitle">Create New Discussion</h2>
                <button class="modal-close" aria-label="Close modal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form id="newThreadForm" class="modal-content">
                <div class="form-group">
                    <label for="threadTitle">Title</label>
                    <input type="text" id="threadTitle" name="title" required 
                           placeholder="Enter a descriptive title">
                </div>
                <div class="form-group">
                    <label for="threadCategory">Category</label>
                    <select id="threadCategory" name="category" required>
                        <option value="">Select a category</option>
                        <option value="web-security">Web Security</option>
                        <option value="network-security">Network Security</option>
                        <option value="malware-analysis">Malware Analysis</option>
                        <option value="pentesting">Penetration Testing</option>
                        <option value="ctf">CTF Challenges</option>
                        <option value="tools">Security Tools</option>
                        <option value="news">Security News</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="threadContent">Content</label>
                    <textarea id="threadContent" name="content" required 
                              placeholder="Share your thoughts, questions, or insights..."
                              rows="6"></textarea>
                </div>
                <div class="form-group">
                    <label for="threadTags">Tags</label>
                    <input type="text" id="threadTags" name="tags" 
                           placeholder="Add tags separated by commas">
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" data-close-modal>Cancel</button>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-paper-plane"></i> Post Discussion
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Scripts -->
    <script>
        // Modal Functionality
        const modal = document.getElementById('newThreadModal');
        const newThreadBtn = document.getElementById('newThreadBtn');
        const closeModalBtns = document.querySelectorAll('[data-close-modal], .modal-close');
        const modalOverlay = document.querySelector('.modal-overlay');

        function openModal() {
            modal.setAttribute('aria-hidden', 'false');
            document.body.style.overflow = 'hidden';
        }

        function closeModal() {
            modal.setAttribute('aria-hidden', 'true');
            document.body.style.overflow = '';
        }

        newThreadBtn.addEventListener('click', openModal);
        closeModalBtns.forEach(btn => btn.addEventListener('click', closeModal));
        modalOverlay.addEventListener('click', closeModal);

        // Close modal on escape key
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && modal.getAttribute('aria-hidden') === 'false') {
                closeModal();
            }
        });

        // Category Selection
        const categoryItems = document.querySelectorAll('.category-item');
        categoryItems.forEach(item => {
            item.addEventListener('click', (e) => {
                e.preventDefault();
                categoryItems.forEach(i => i.classList.remove('active'));
                item.classList.add('active');
                // Add filter logic here
            });
        });

        // Form Submission
        const newThreadForm = document.getElementById('newThreadForm');
        newThreadForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const formData = new FormData(newThreadForm);
            const data = Object.fromEntries(formData.entries());
            
            try {
                // Add API call here
                console.log('Form data:', data);
                closeModal();
                newThreadForm.reset();
                // Show success message
            } catch (error) {
                console.error('Error:', error);
                // Show error message
            }
        });

        // Search Functionality
        const searchInput = document.getElementById('forumSearch');
        let searchTimeout;

        searchInput.addEventListener('input', (e) => {
            clearTimeout(searchTimeout);
            searchTimeout = setTimeout(() => {
                const searchTerm = e.target.value.trim();
                if (searchTerm) {
                    // Add search logic here
                    console.log('Searching for:', searchTerm);
                }
            }, 500);
        });

        // Filter Change Handlers
        const categoryFilter = document.getElementById('categoryFilter');
        const sortFilter = document.getElementById('sortFilter');

        categoryFilter.addEventListener('change', (e) => {
            const category = e.target.value;
            // Add category filter logic here
            console.log('Filtering by category:', category);
        });

        sortFilter.addEventListener('change', (e) => {
            const sortBy = e.target.value;
            // Add sort logic here
            console.log('Sorting by:', sortBy);
        });

        // Voting System
        const voteButtons = document.querySelectorAll('.vote-btn');
        voteButtons.forEach(button => {
            button.addEventListener('click', (e) => {
                const isUpvote = e.currentTarget.getAttribute('aria-label') === 'Upvote';
                const voteCount = e.currentTarget.parentElement.querySelector('.vote-count');
                const currentCount = parseInt(voteCount.textContent);
                
                // Add voting logic here
                voteCount.textContent = isUpvote ? currentCount + 1 : currentCount - 1;
            });
        });

        // Logout Handler
        document.getElementById('logoutBtn').addEventListener('click', () => {
            // Add logout logic here
            window.location.href = '../auth/login.html';
        });
    </script>
</body>
</html>
